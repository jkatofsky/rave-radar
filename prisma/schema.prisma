generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

enum OrganizerType {
  BarOrClub
  EventCollective
  MusicFestival
}

model Organizer {
  id Int @id @default(autoincrement())

  name     String
  type     OrganizerType
  websites String[]
  reviews  Review[]

  overallAverageRating          Float
  soundSystemAverageRating      Float
  djAndMusicAverageRating       Float
  crowdPlurAverageRating        Float
  safetyAndComfortAverageRating Float
  venueAverageRating            Float
  valueForMoneyAverageRating    Float
  visualsAverageRating          Float
  staffAverageRating            Float
  foodAndDrinkAverageRating     Float

  // TODO: location information; want to be able to categorize it to a city for filtering, AND store exact coords to eventually display organizers on a map?
}

// TODO: much more sub-genres, somehow grouped through their parent genre
// TODO: make this a model to support user-defined genres?
enum Genre {
  House
  Techno
  Trance
  Dubstep
  DrumAndBass
  Hardstyle
  Trap
  Electro
}

model Review {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())

  organizer   Organizer @relation(fields: [organizerId], references: [id])
  organizerId Int

  description String
  genres      Genre[]
  moneySpent  Int?

  soundSystemRating      Int
  djAndMusicRating       Int
  crowdPlurRating        Int
  safetyAndComfortRating Int
  venueRating            Int
  valueForMoneyRating    Int
  visualsRating          Int?
  staffRating            Int?
  foodAndDrinkRating     Int?
  // TODO: images
}
